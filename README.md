# Termeet-frontend

<div align="center">
  <img src="termeet.jpg" alt="Termeet" width=200 height=200/>
</div>

## Фронтенд-часть проекта Termeet

Версия из main ветки доступна по [адресу](https://termeet-front.vercel.app/)
**_\* После мерджа нужно подождать немного пока пересоберется проект._**

Также собирается тестовый стенд для каждого пулл реквеста ссылку на которую можно найти в комментариях.

## Технологический стек

- **React 19** — библиотека для построения пользовательских интерфейсов
- **TypeScript** — типизированный JavaScript
- **Vite** — быстрый сборщик и dev-сервер
- **ESLint** — линтер для JavaScript/TypeScript
- **Prettier** — форматтер кода
- **Stylelint** — линтер для CSS
- **Husky** — Git hooks для автоматизации проверок

## Быстрый старт

```bash
# Клонирование репозитория
git clone https://github.com/StyleruOrganization/Termeet-front.git

# Установка зависимостей (рекомендуется pnpm)
pnpm install

# Запуск dev-сервера
pnpm run dev

# Сборка для production
pnpm run build
```

## Настройка окружения

### 1. Установка pnpm (рекомендуется)

```bash
npm install -g pnpm
```

### 2. Настройка Git Hooks (обязательно!)

После установки зависимостей выполните команду:

```bash
git config core.hooksPath .husky
```

Это активирует Git-хуки:

- **pre-commit** — проверка кода на соответствие правилам ESLint, Prettier и Stylelint перед коммитом
- **commit-msg** — автоматическое добавление префикса с названием ветки к сообщению коммита в формате `[branch-name]: [commit message]`

### 3. Настройка VS Code

- При клонировании репозитория VS Code предложит установить рекомендуемые расширения из файла [`.vscode/extensions.json`](.vscode/extensions.json).<br/>
  Добавьте в настройки VS Code автоматическое исправление при сохранении:

  ```json
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "always",
    "source.fixAll.stylelint": "always"
  },
  "editor.defaultFormatter": "esbenp.prettier-vscode"
  ```

- Подъехала новая фича, теперь создавать шаблон для компонентов еще проще. Для этого выполните следующие шаги:

1. Установить расширение [FolderTemplates](https://marketplace.visualstudio.com/items?itemName=Huuums.vscode-fast-folder-structure)
2. В `settings.json` нужно добавить строчку в любое место
   ```json
   folderTemplates.templateFolderPath": "./infra/vscode-folder-templates
   ```
3. Теперь в контекстном меню при клике на папку в которой хотите создать компонент, будет предложено `Create new Templated Folder`, ее жмакаем и прописываем название компоненте, желательно без пробелов, но можно с маленькой буквы.
4. Автоматически после создания откроются файлы `.tsx` и `.module.css`, и можете сразу писать логику основную. Это упрощает жизнь и экономит время.

**Важно**: Если у вас открыто сразу несколько папок в VS Code, то нужно подправить путь до templates, поэтому в одном окне лучше открывать только корень `termeet`.

## Структура проекта

```
src/
├── app/                 # Конфигурация приложения, роутинг, корневой layout
├── assets/              # Статические ресурсы (иконки как React-компоненты — нужно для Playwright)
├── components/          # UI-компоненты приложения
├── pages/               # Страницы (роуты)
├── shared/              # Общее: утилиты, типы, хуки, константы, сторы, провайдеры, контексты (если используются в 2+ местах)
└── styles/              # Глобальные стили и CSS-переменные
```

### Структура папки компонента

Компоненты в `src/components/` и `src/pages/` `src/shared/components` следуют единой структуре. Шаблон создаётся через FolderTemplates (см. выше).

```
ComponentName/
├── ComponentName.tsx           # Основной компонент
├── ComponentName.module.css    # Стили (CSS Modules)
├── ComponentName.types.ts      # Типы и пропсы
├── index.ts                    # Публичный экспорт (re-export компонента)
├── ComponentName.hooks/        # Хуки, используемые только этим компонентом (опционально)
│   └── useSomething.ts
├── ComponentName.utils/        # Вспомогательные функции (опционально)
│   └── helper.ts
└── ComponentName.tests/        # Компонентные тесты и сториз (опционально)
    ├── ComponentName.test.tsx
    ├── ComponentName.story.tsx
    └── ComponentName.const.ts
```

### Роутинг

Используется [React Router](https://reactrouter.com/) v7. Роуты задаются в [`src/app/App.tsx`](src/app/App.tsx) (или в отдельном `routes.ts`, если вынесены).


## Правила разработки

1. **Merge в main** — используется только squash merge для линейной истории коммитов
2. **CSS-переменные** — обязательное использование CSS-переменных для свойств: `color` и всех производных от него, `border` также, `font` также. Все остальные свойства должны быть в алфавитном порядке
3. **Порядок CSS-свойств** — автоматически сортируется при сохранении файла

## Тестирование

Теперь пишем тесты на новые компоненты, таким образом, обеспечивая их стабильность в будущем.

### Компонентное тестирование

Компонентное тестирование проверяет отдельные компоненты пользовательского интерфейса изолированно. В проекте используется Playwright для компонентного тестирования с возможностью создания скриншотов для визуальной регрессии. Такие тесты кладем рядом с компонентом. Небольшая подготовительная логика для достижения возможных состояний + скриншот

‼️ Для обновления скриншотов необходимо: 
1. Cобрать образ командой. Первая сборка возможно будет долгая но потом слои там докер закеширует и потом пересборк (если она будет) намного быстрее 
``` bash 
docker build -t playwright-test -f docker/Dockerfile.playwright .
```
2. Потом апдейтим скриншоты командой
``` bash
pnpm pwt:screens:update
```


### E2E тестирование

E2E (end-to-end) тестирование проверяет приложения от начала до конца, имитируя реальные сценарии использования пользователем. Также юзаем Playwright. Это в отдельной папке `e2e`.

---

> **Вопросы и предложения** приветствуются в [Issues](../../issues)
